<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Investissement</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(to bottom, #4CAF50, #ffffff);
        }

        .balance-section {
            margin: 100px auto;
            font-size: 100px;
            color: #fff;
            background-color: #ff6f61;
            padding: 15px;
            text-align: center;
            border-radius: 15px;
            width: 800%;
            max-width: 600px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .vip-selection {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            padding-bottom: 80px;
        }

        .vip-level {
            padding: 20px;
            background-color: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            width: 280px;
            text-align: center;
            transition: transform 0.3s ease, background-color 0.3s ease;
        }

        .vip-level:hover {
            background-color: #f9f9f9;
            transform: scale(1.05);
        }

        .vip-level strong {
            display: block;
            font-size: 18px;
            margin-bottom: 10px;
            color: #4a4a4a;
        }

        .vip-level .total-earnings {
            font-weight: bold;
            color: #ff6f61;
            animation: colorChange 2s infinite;
        }

        @keyframes colorChange {
            0% { color: #ff6f61; }
            25% { color: #4CAF50; }
            50% { color: #ff9800; }
            75% { color: #2196F3; }
            100% { color: #ff6f61; }
        }

        .invest-button {
            margin-top: 15px;
            padding: 12px 25px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }

        .invest-button:hover {
            background-color: #3b8d40;
        }

        .fixed-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 96%;
            background-color: #ffffff;
            display: flex;
            justify-content: space-around;
            padding: 10px;
            box-shadow: 0 -10px 10px rgba(0, 0, 0, 0.1);
        }

        .footer-button {
            width: 77px;
            height: 40px;
            background-color: #000000;
            color: white;
            border: none;
            border-radius: 100;
            cursor: pointer;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .footer-button:hover {
            background-color: #6a8dff;
        }
    </style>
</head>
<body>

    <div class="vip-selection">
        
        <!-- VIP 1 -->
        <div class="vip-level" data-vip="1" data-amount="5000" data-daily-earnings="500" data-cycle="15">
            <strong>VIP 1 - 5 000 XOF /10 USDT</strong><br>
            Revenus: 500 XOF/jour<br>
            Cycle: 15 jours<br>
            <span class="total-earnings">Revenus Totaux: XOF 7 500</span><br>
            <button class="invest-button" data-vip="1">Investir</button>
        </div>

        <!-- Les autres niveaux VIP déjà présents -->

        <div class="vip-level" data-vip="2" data-amount="10000" data-daily-earnings="1000" data-cycle="15">
            <strong>VIP 2 - 10 000 XOF /20 USDT</strong><br>
            Revenus: 1 000 XOF/jour<br>
            Cycle: 15 jours<br>
            <span class="total-earnings">Revenus Totaux: XOF 15 000</span><br>
            <button class="invest-button" data-vip="2">Investir</button>
        </div>

        <div class="vip-level" data-vip="3" data-amount="15000" data-daily-earnings="1500" data-cycle="15">
            <strong>VIP 3 - 15 000 XOF /30 USDT</strong><br>
            Revenus: 1 500 XOF/jour<br>
            Cycle: 15 jours<br>
            <span class="total-earnings">Revenus Totaux: XOF 22 500</span><br>
            <button class="invest-button" data-vip="3">Investir</button>
        </div>

        <!-- Ajoutez les autres niveaux VIP si nécessaire -->

        <div class="vip-level" data-vip="4" data-amount="20000" data-daily-earnings="2000" data-cycle="15">
            <strong>VIP 4 - 20 000 XOF /40 USDT</strong><br>
            Revenus: 2 000 XOF/jour<br>
            Cycle: 15 jours<br>
            <span class="total-earnings">Revenus Totaux: XOF 30 000 </span><br>
            <button class="invest-button" data-vip="4">Investir</button>
        </div>

        <div class="vip-level" data-vip="5" data-amount="30000" data-daily-earnings="3000" data-cycle="15">
            <strong>VIP 5 - 30 000 XOF /60 USDT</strong><br>
            Revenus: 3 000 XOF/jour<br>
            Cycle: 15 jours<br>
            <span class="total-earnings">Revenus Totaux: XOF 45 000</span><br>
            <button class="invest-button" data-vip="5">Investir</button>
        </div>

        <div class="vip-level" data-vip="6" data-amount="50000" data-daily-earnings="5000" data-cycle="30">
            <strong>VIP 6 - 50 000 XOF /100 USDT</strong><br>
            Revenus: 5 000 XOF/jour<br>
            Cycle: 15 jours<br>
            <span class="total-earnings">Revenus Totaux: XOF 75 000</span><br>
            <button class="invest-button" data-vip="6">Investir</button>
        </div>

        <div class="vip-level" data-vip="7" data-amount="75000" data-daily-earnings="7000" data-cycle="15">
            <strong>VIP 7 - 75 000 XOF /150 USDT</strong><br>
            Revenus: 7 000 XOF/jour<br>
            Cycle: 15 jours<br>
            <span class="total-earnings">Revenus Totaux: XOF 105 000</span><br>
            <button class="invest-button" data-vip="7">Investir</button>
        </div>

        <div class="vip-level" data-vip="8" data-amount="100000" data-daily-earnings="10000" data-cycle="15">
            <strong>VIP 8 - 100 000 XOF /200 USDT</strong><br>
            Revenus: 10 000 XOF/jour<br>
            Cycle: 15 jours<br>
            <span class="total-earnings">Revenus Totaux: XOF 150 000</span><br>
            <button class="invest-button" data-vip="8">Investir</button>
        </div>

        <div class="vip-level" data-vip="9" data-amount="150000" data-daily-earnings="15000" data-cycle="15">
            <strong>VIP 9 - 150 000 XOF /300 USDT</strong><br>
            Revenus: 15 000 XOF/jour<br>
            Cycle: 15 jours<br>
            <span class="total-earnings">Revenus Totaux: XOF 225 000</span><br>
            <button class="invest-button" data-vip="9">Investir</button>
        </div>

        <div class="vip-level" data-vip="10" data-amount="200000" data-daily-earnings="20000" data-cycle="15">
            <strong>VIP 10 - 200 000 XOF /400 USDT</strong><br>
            Revenus: 20 000 XOF/jour<br>
            Cycle: 15 jours<br>
            <span class="total-earnings">Revenus Totaux: XOF 300 000</span><br>
            <button class="invest-button" data-vip="10">Investir</button>
        </div>

    </div>

    <div class="fixed-footer">
        <button class="footer-button" onclick="navigate('accueil')">accueil</button>
        <button class="footer-button" onclick="navigate('historique_retrait')">Historique</button>
        <button class="footer-button" onclick="navigate('investir')">investir</button>
        <button class="footer-button" onclick="navigate('balance')">compte</button>
    </div>

    <script>
        // Fonction pour changer rapidement les couleurs de la section des revenus
        const earningsSections = document.querySelectorAll('.total-earnings');
        const colors = ['#ff6f61', '#4CAF50', '#ff9800', '#2196F3', '#9c27b0'];

        setInterval(() => {
            earningsSections.forEach(section => {
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                section.style.color = randomColor;
            });
        }, 500); // Changer de couleur toutes les 500 ms

        function navigate(page) {
            // Remplacez ce code par la logique de navigation réelle
            console.log(`Navigation vers ${page}`);
        }
    </script>
    <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-app.js";
    import { getAuth } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-auth.js";
    import { getDatabase, ref, onValue, update } from "https://www.gstatic.com/firebasejs/9.0.0/firebase-database.js";

    const firebaseConfig = {
        apiKey: "AIzaSyBFREc4PyC6VTYgXN3eEV9_AYpVo6nkyco",
        authDomain: "ciaxe-727b1.firebaseapp.com",
        databaseURL: "https://ciaxe-727b1-default-rtdb.firebaseio.com",
        projectId: "ciaxe-727b1",
        storageBucket: "ciaxe-727b1.appspot.com",
        messagingSenderId: "52732576686",
        appId: "1:52732576686:web:70f5d27fc58bc5bd31fe3f"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth();
    const database = getDatabase();

    let userBalance = 0;

    function getUserBalance() {
        const user = auth.currentUser;
        if (user) {
            const userRef = ref(database, 'users/' + user.uid);
            onValue(userRef, (snapshot) => {
                const data = snapshot.val();
                userBalance = data ? Number(data.balance) || 0 : 0;
                document.getElementById('currentBalance').innerText = `XOF ${userBalance}`;
            });
        }
    }

    function invest(vipData) {
        const user = auth.currentUser;
        if (user) {
            const vipAmount = vipData.amount;

            if (userBalance >= vipAmount) {
                const newBalance = userBalance - vipAmount;

                const updates = {
                    [`/users/${user.uid}/balance`]: newBalance,
                    [`/users/${user.uid}/vipStatus`]: vipData.level,
                    [`/users/${user.uid}/dailyEarnings`]: vipData.dailyEarnings,
                    [`/users/${user.uid}/cycle`]: vipData.cycle,
                    [`/users/${user.uid}/totalEarnings`]: vipData.dailyEarnings * vipData.cycle
                };

                update(ref(database), updates).then(() => {
                    alert(`Investissement réussi dans le niveau VIP ${vipData.level}`);
                    getUserBalance();
                }).catch((error) => {
                    console.error('Erreur lors de la mise à jour :', error);
                    alert("Une erreur est survenue lors de l'investissement. Veuillez réessayer.");
                });
            } else {
                alert("Solde insuffisant pour cet investissement.");
            }
        } else {
            alert("Veuillez vous connecter pour investir.");
        }
    }

    document.querySelectorAll('.invest-button').forEach((button) => {
        button.addEventListener('click', () => {
            const vipLevel = button.getAttribute('data-vip');
            const vipElement = document.querySelector(`.vip-level[data-vip="${vipLevel}"]`);
            const vipAmount = parseInt(vipElement.getAttribute('data-amount'));
            const dailyEarnings = parseInt(vipElement.getAttribute('data-daily-earnings'));
            const cycle = parseInt(vipElement.getAttribute('data-cycle'));

            const selectedVip = {
                level: vipLevel,
                amount: vipAmount,
                dailyEarnings: dailyEarnings,
                cycle: cycle
            };

            invest(selectedVip);
        });
    });

    auth.onAuthStateChanged((user) => {
        if (user) {
            getUserBalance();
        } else {
            alert("Vous devez être connecté pour investir.");
            window.location.href = "index.html";
        }
    });

    window.navigate = function(page) {
        window.location.href = `${page}.html`;
    };
</script>
</body>
</html>
